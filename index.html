<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phantom Universal Chainer</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%230f0c29'/%3E%3Cpath d='M20 24c0-2.2 1.8-4 4-4h8c2.2 0 4 1.8 4 4v2c0 .6-.4 1-1 1s-1-.4-1-1v-2c0-1.1-.9-2-2-2h-8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 2.2-1.8 4-4 4h-8c-2.2 0-4-1.8-4-4V24zm24 0c0-2.2-1.8-4-4-4h-8c-2.2 0-4 1.8-4 4v2c0 .6.4 1 1 1s1-.4 1-1v-2c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2h-8c-1.1 0-2-.9-2-2v-2c0-.6-.4-1-1-1s-1 .4-1 1v2c0 2.2 1.8 4 4 4h8c2.2 0 4-1.8 4-4V24z' fill='%2300ffff'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' rx='40' fill='%230f0c29'/%3E%3Cpath d='M56 67.5c0-6.2 5-11.2 11.2-11.2h22.5c6.2 0 11.2 5 11.2 11.2v5.6c0 1.7-1.1 2.8-2.8 2.8s-2.8-1.1-2.8-2.8v-5.6c0-3.1-2.5-5.6-5.6-5.6H67.2c-3.1 0-5.6 2.5-5.6 5.6v45c0 3.1 2.5 5.6 5.6 5.6h22.5c3.1 0 5.6-2.5 5.6-5.6v-5.6c0-1.7 1.1-2.8 2.8-2.8s2.8 1.1 2.8 2.8v5.6c0 6.2-5 11.2-11.2 11.2H67.2c-6.2 0-11.2-5-11.2-11.2v-45zm67.5 0c0-6.2-5-11.2-11.2-11.2H89.8c-6.2 0-11.2 5-11.2 11.2v5.6c0 1.7 1.1 2.8 2.8 2.8s2.8-1.1 2.8-2.8v-5.6c0-3.1 2.5-5.6 5.6-5.6h22.5c3.1 0 5.6 2.5 5.6 5.6v45c0 3.1-2.5 5.6-5.6 5.6H89.8c-3.1 0-5.6-2.5-5.6-5.6v-5.6c0-1.7-1.1-2.8-2.8-2.8s-2.8 1.1-2.8 2.8v5.6c0 6.2 5 11.2 11.2 11.2h22.5c6.2 0 11.2-5 11.2-11.2v-45z' fill='%2300ffff'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="particles-js" class="particles"></div>
    <div class="container">
        <h1>Phantom Universal Chainer <span class="version-tag">v10.1</span></h1>
        <p>Paste your full Xray JSON config below. Supports both single proxy and multi-proxy (load balanced) configs.</p>
        
        <div class="public-config-card">
            <div class="public-config-info">
                <i class="fas fa-gift"></i>
                <p>Don't have a config? Use the free public load-balanced config provided by Anonymous (updated every 12 hours)</p>
            </div>
            <div class="public-config-toggle">
                <label class="toggle-switch">
                    <input type="checkbox" id="usePublicConfigToggle" name="usePublicConfig">
                    <span class="toggle-slider"></span>
                </label>
                <label for="usePublicConfigToggle" class="toggle-label">Use Public Config</label>
            </div>
        </div>

        <div class="input-header-buttons">
            <button id="pasteButton"><i class="fas fa-paste"></i> Paste from Clipboard</button>
            <button id="uploadButton"><i class="fas fa-upload"></i> Upload JSON File</button>
            <input type="file" id="fileInput" accept=".json" style="display: none;">
        </div>

        <div class="textarea-container" id="jsonInputContainer">
            <div class="drag-overlay" id="dragOverlay">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drop JSON file here</p>
            </div>
            <div class="line-numbers" id="jsonInputLineNumbers">1</div>
            <textarea id="jsonConfigInput" placeholder="Paste your single or load-balanced JSON config here... Or drag & drop a JSON file" rows="10"></textarea>
        </div>

        <h3 style="margin-top: 20px; margin-bottom: 10px; text-align: center; color: var(--title-color);">Forced Route IPs & Domains:</h3>
        <div class="textarea-container">
            <div class="line-numbers" id="ipInputLineNumbers">1</div>
            <textarea id="ipInput" rows="6"></textarea>
        </div>
        
        <div class="checkbox-container-left">
            <div class="checkbox-item">
                <input type="checkbox" id="routeAllCheckbox" name="routeAll">
                <label for="routeAllCheckbox">Route All Traffic Through Config</label>
            </div>
            <div class="toggle-switch-container">
                <label class="toggle-switch">
                    <input type="checkbox" id="dualConfigToggle" name="dualConfig">
                    <span class="toggle-slider"></span>
                </label>
                <label for="dualConfigToggle" class="toggle-label">Generate Dual Configs (All + Custom)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="customNameCheckbox" name="customName">
                <label for="customNameCheckbox">Use Custom Config Name</label>
            </div>
            <div class="custom-name-input-container" id="customNameInputContainer">
                <input type="text" id="customNameInput" placeholder="Enter your custom config name here..." maxlength="50" disabled>
                <span class="char-counter" id="charCounter">0/50</span>
            </div>
        </div>

        <div class="button-container">
            <button id="generateButton"><i class="fas fa-cogs"></i> Generate Combined Config</button>
            <button id="clearButton"><i class="fas fa-trash-alt"></i> Clear All</button>
        </div>

        <div id="alertContainer" class="alert-container"></div>

        <h3 style="margin-top: 30px; margin-bottom: 10px; text-align: center; color: var(--title-color);">
            Result: <span id="configCounter"></span>
            <span id="previewLabel" style="display: none; font-size: 0.6em; color: #ffb86c; margin-left: 10px;">(Preview Mode - Copy/Download includes both)</span>
        </h3>
        
        <div id="configTabs" class="config-tabs" style="display: none;">
            <button class="tab-button active" data-config="0">Preview: Config 1 (All Traffic)</button>
            <button class="tab-button" data-config="1">Preview: Config 2 (Custom)</button>
        </div>

        <div class="textarea-container">
            <div class="line-numbers" id="outputLineNumbers">1</div>
            <textarea id="outputJson" readonly>Your combined JSON config will appear here...</textarea>
        </div>
        
        <div class="output-footer-buttons">
            <button id="copyButton"><i class="fas fa-copy"></i> Copy to Clipboard</button>
            <button id="downloadButton" style="display: none;"><i class="fas fa-download"></i> Download JSON</button>
        </div>
        
        <footer>
            Designed by: <a href="https://t.me/BXAMbot" target="_blank" rel="noopener noreferrer">Anonymous</a>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js" defer></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/config-processor.js"></script>
    <script src="js/main.js"></script>
</body>
</html>